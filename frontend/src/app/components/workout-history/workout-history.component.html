<div class="history-container">
  <h3 class="section-title">Completed Sessions</h3>
  <ng-container *ngIf="sessions$ | async as sessions">
    <app-progression-chart [sessions]="sessions"></app-progression-chart>
  </ng-container>
  <div class="history-list" *ngIf="sessions$ | async as sessions">
    <div class="empty-state" *ngIf="sessions.length === 0">
      <p>No completed workouts yet</p>
    </div>

    <div *ngFor="let session of sessions" class="history-item"
      [class.active]="(selectedSession$ | async)?.id === session.id" (click)="onSelect(session)">
      <div class="item-icon">
        <app-sport-icon [sport]="session.sportType" [size]="20"></app-sport-icon>
      </div>
      <div class="item-details">
        <span class="item-title">{{ session.title }}</span>
        <span class="item-meta">
          {{ formatTime(session.totalDuration) }} â€¢ {{ session.avgPower }}{{ getSportUnit(session) }} avg
          <span class="sync-icons">
            <span *ngIf="session.syncedToStrava" title="Synced to Strava">ðŸš´</span>
            <span *ngIf="session.syncedToGarmin" title="Synced to Garmin">âŒš</span>
          </span>
        </span>
      </div>
    </div>
  </div>
</div>